(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["foodsDetails"],{"4d83":function(t,s,i){t.exports=i.p+"img/img_hot_goods_title.b13694ad.png"},7395:function(t,s,i){t.exports=i.p+"img/img_ykj.9dbaeb7e.png"},7645:function(t,s,i){"use strict";i.r(s);var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"foodsDetails"},[a("div",{staticClass:"foodsDetails_header"},[a("i",{staticClass:"icon_arrow_left",on:{click:t.goBack}}),a("p",{staticClass:"foodsDetails_title"},[t._v("商品详情")])]),a("div",{staticClass:"swiper"},[a("van-swipe",{on:{change:t.onChange},scopedSlots:t._u([{key:"indicator",fn:function(){return[a("div",{staticClass:"custom-indicator"},[t._v(t._s(t.current+1)+"/"+t._s(t.detailsObj.commodityMainImg.length))])]},proxy:!0}])},t._l(t.detailsObj.commodityMainImg,(function(t,s){return a("van-swipe-item",{key:s},[a("img",{staticClass:"img_swiper",attrs:{src:t}})])})),1),a("div",{staticClass:"touzhu"},t._l(t.participantList,(function(s,i){return a("div",{key:i,staticClass:"main"},[a("div",{staticClass:"bg"}),a("p",[t._v(t._s(s))])])})),0)],1),a("div",{staticClass:"foodsDetails_price"},[a("div",{staticClass:"bg1"}),a("div",{staticClass:"bg2"}),a("div",{staticClass:"bg3"}),a("div",{staticClass:"icon_equal"}),a("div",{staticClass:"icon_reduce"}),a("span",{staticClass:"price1"},[t._v("￥"+t._s(t.detailsObj.marketPrice))]),a("span",{staticClass:"price2"},[t._v("￥"+t._s(t.detailsObj.officialPrice))]),a("span",{staticClass:"price3"},[t._v("￥"+t._s(t.detailsObj.platformSubsidy))]),a("span",{staticClass:"text1"},[t._v(t._s(t.supplier[t.detailsObj.supplier])+"售价")]),a("span",{staticClass:"text2"},[t._v("平台补贴")]),a("p",{staticClass:"btn_foodsDetails_price",on:{click:function(s){return t.toDeepLink(t.detailsObj.goodsUrl)}}},[t._v("前往购买")]),t.openPrizeFlag?a("img",{staticClass:"img_ykj",attrs:{src:i("7395"),alt:""}}):a("div",{staticClass:"price_countDown"},[t._m(0),a("van-count-down",{attrs:{time:t.time},on:{finish:t.finish},scopedSlots:t._u([{key:"default",fn:function(s){return[0!=s.days?a("span",{staticClass:"day"},[t._v(t._s(s.days)+"天")]):t._e(),a("span",{staticClass:"block"},[t._v(t._s(s.hours>9?s.hours:"0"+s.hours))]),a("span",{staticClass:"colon"},[t._v(":")]),a("span",{staticClass:"block"},[t._v(t._s(s.minutes>9?s.minutes:"0"+s.minutes))]),a("span",{staticClass:"colon"},[t._v(":")]),a("span",{staticClass:"block"},[t._v(t._s(s.seconds>9?s.seconds:"0"+s.seconds))])]}}])})],1)]),a("div",{staticClass:"foodsDetails_info"},[a("div",{staticClass:"foodsDetails_info_box"},[a("div",{staticClass:"foodsDetails_box_title"},[a("p",[a("img",{staticClass:"icon_logo",attrs:{src:t.detailsObj.logo,alt:""}}),a("span",{staticClass:"commodityName"},[t._v(t._s(t.detailsObj.commodityName))])]),a("p",{staticClass:"userCycleInvestmentCount"},[t._v("您已参与 "),a("span",[t._v(t._s(t.detailsObj.userCycleInvestmentCount))]),t._v(" 次")])]),a("p",{staticClass:"cycle_quantity"},[a("i",{staticClass:"icon_flag_bai"}),a("span",[t._v("第"+t._s(t.item.cycle)+"期")]),a("i",{staticClass:"icon_gift_bai"}),a("span",[t._v("共"+t._s(t.item.quantity)+"份免费奖品")])]),a("p",{staticClass:"totalCount_endTime"},[a("i",{staticClass:"icon_heat"}),a("span",[t._v("已参与"+t._s(t.detailsObj.totalCount)+"次")]),a("i",{staticClass:"icon_time"}),a("span",[t._v("开奖时间："+t._s(t.item.endTimeStr))])]),a("p",{staticClass:"number_publicity"},[a("span",{on:{click:function(s){return t.toPath("/freeAccess/participateNumber")}}},[t._v("我的参与编号 >")]),a("span",{on:{click:function(s){return t.toPath("/freeAccess/winningPublicity")}}},[t._v("往期中奖公示 >")])]),a("p",{staticClass:"process"},[a("span",[t._v("投入积分参与")]),a("i"),a("span",[t._v("等待开奖")]),a("i"),a("span",[t._v("抽中免费领取奖品")]),a("span",{staticClass:"process_btn",on:{click:function(s){return t.toPath("/activityRules")}}},[t._v("活动规则")])])])]),a("div",{staticClass:"sponsor",on:{click:function(s){return t.toDeepLink(t.detailsObj.storeAddress)}}},[a("img",{staticClass:"img_sponsor_header",attrs:{src:t.detailsObj.storeLogo,alt:""}}),a("div",{staticClass:"sponsor_box"},[a("p",{staticClass:"text1"},[t._v("本宝贝由 "),a("span",[t._v(t._s(t.detailsObj.storeName))]),t._v(" 赞助")]),a("p",{staticClass:"text2"},[t._v("更多优惠活动等着你")])]),a("i",{staticClass:"icon_arrow_right_weight"})]),a("div",{staticClass:"foodsDetails_img"},[t._m(1),t._l(t.detailsObj.commodityInfoImg,(function(t,s){return a("div",{key:s},[a("img",{attrs:{src:t}})])}))],2),a("div",{staticClass:"foodsDetails_btn"},[t.openPrizeFlag?a("p",{staticClass:"foodsDetails_text"},[t._v("直接购买也很划算哦 >")]):a("div",{staticClass:"fml_btn",on:{click:t.bet}},[t._v("免费领")]),t.openPrizeFlag?a("div",{class:"TAOBAO"==t.detailsObj.supplier?"thgm2 thgm_tb":"thgm2 thgm_jd",on:{click:function(s){return t.toDeepLink(t.detailsObj.goodsUrl)}}},[a("img",{staticClass:"img_thgm",attrs:{src:t.detailsObj.angleMark,alt:""}}),a("span",{staticClass:"text1"},[t._v("特惠购买￥")]),a("span",{staticClass:"text2"},[t._v(t._s(t.detailsObj.marketPrice))])]):a("div",{class:"TAOBAO"==t.detailsObj.supplier?"thgm1 thgm_tb":"thgm1 thgm_jd",on:{click:function(s){return t.toDeepLink(t.detailsObj.goodsUrl)}}},[a("img",{staticClass:"img_thgm",attrs:{src:t.detailsObj.angleMark,alt:""}}),a("span",{staticClass:"text1"},[t._v("特惠购买￥")]),a("span",{staticClass:"text2"},[t._v(t._s(t.detailsObj.marketPrice))])])]),t.flagPopup?a("div",{staticClass:"popup"},[a("div",{staticClass:"popup_main"},[a("i",{staticClass:"icon_close",on:{click:t.closePopup}}),a("p",{staticClass:"popup_main_top"},[t.isWin?a("i",{staticClass:"icon_yy"}):t._e(),t.isWin?t._e():a("i",{staticClass:"icon_sx"}),t.isWin?a("span",[t._v("恭喜您，中奖啦！")]):t._e(),t.isWin?t._e():a("span",[t._v("很遗憾本期未中奖，请再接再厉！")]),t.isWin?a("img",{staticClass:"img_top_zs",attrs:{src:i("fb8b")}}):t._e()]),a("div",{staticClass:"popup_main_goods"},[a("div",{staticClass:"popup_main_goods_fs"},[a("img",{staticClass:"img_goods",attrs:{src:t.item.commodityMainImg,alt:""}}),a("div",{staticClass:"goods_list_box"},[a("p",{staticClass:"text1"},[a("img",{staticClass:"icon_logo",attrs:{src:t.item.logo,alt:""}}),a("span",[t._v(t._s(t.item.commodityName))])]),a("p",{staticClass:"text2"},[a("i",{staticClass:"icon_time"}),a("span",[t._v("开奖时间："+t._s(t.item.endTimeStr))])]),a("p",{staticClass:"text3"},[a("i",{staticClass:"icon_gift"}),a("span",[t._v("共"+t._s(t.item.quantity)+"份奖品")]),a("i",{staticClass:"icon_heat"}),a("span",[t._v("已参与"+t._s(t.detailsObj.totalCount)+"次")])])])]),t.isWin&&!t.isReceive?a("div",{staticClass:"win_box"},[a("p",{staticClass:"win_box_text1"},[t._v("请在"+t._s(t.winPrizeObj.expirationTime)+"前领取奖品，过期将自动作废！")]),a("div",{staticClass:"win_box_box"},[a("p",{staticClass:"text1"},[t._v("您的中奖编号")]),a("p",{staticClass:"text2"},[t._v(t._s(t.winPrizeObj.investmentNo))]),a("p",{staticClass:"btn",on:{click:t.toReceive}})])]):t._e(),t.isWin&&t.isReceive?a("div",{staticClass:"win_box"},[a("p",{staticClass:"win_box_text1"},[t._v("奖励已被领取过了哦，赶快去参加其他商品吧 ")]),a("div",{staticClass:"win_box_box"},[t.winPrizeObj.expressNum?a("p",{staticClass:"text1"},[t._v("物流单号："+t._s(t.winPrizeObj.expressName+" "+t.winPrizeObj.expressNum))]):a("p",{staticClass:"text1"},[t._v("正在发货中···")])])]):t._e(),t.isWin?t._e():a("van-swipe",{attrs:{"show-indicators":!1}},[a("van-swipe-item",t._l(t.winUserList,(function(s,i){return a("div",{key:i,staticClass:"van_swipe"},[a("div",{staticClass:"van_swipe_text1"},[a("p",{staticClass:"text1"},[t._v("中奖用户："+t._s(s.userName||"匿名用户"))]),a("p",{staticClass:"text2"},[t._v("参与次数："+t._s(s.participationNum)+"次")])]),a("div",{staticClass:"van_swipe_text2"},[a("p",{staticClass:"text1"},[t._v("中奖编号")]),a("p",{staticClass:"text2"},[t._v(t._s(s.investmentNo))])])])})),0)],1),a("p",{staticClass:"number_publicity dis_flex"},[a("span",{on:{click:function(s){return t.toPath("/freeAccess/participateNumber")}}},[t._v("我的参与编号 >")]),a("span",{on:{click:function(s){return t.toPath("/freeAccess/winningPublicity")}}},[t._v("往期中奖公示 >")])]),a("p",{staticClass:"goods_list_stage"},[t._v("第"+t._s(t.item.cycle)+"期")])],1),a("div",{staticClass:"hot_goods"},[a("img",{staticClass:"hot_goods_title",attrs:{src:i("4d83")}}),a("ul",{staticClass:"goods_list"},t._l(t.foodsList,(function(s,i){return a("li",{key:i},[a("img",{staticClass:"img_goods",attrs:{src:s.commodityMainImg,alt:""}}),a("div",{staticClass:"goods_list_box"},[a("p",{staticClass:"text1"},[a("img",{staticClass:"icon_logo",attrs:{src:s.logo,alt:""}}),a("span",[t._v(t._s(s.commodityName))])]),a("p",{staticClass:"text2"},[a("i",{staticClass:"icon_time"}),a("span",[t._v("开奖时间："+t._s(s.endTime))])]),a("p",{staticClass:"text3"},[a("i",{staticClass:"icon_gift"}),a("span",[t._v("共"+t._s(s.quantity)+"份奖品")]),a("i",{staticClass:"icon_heat"}),a("span",[t._v("已参与"+t._s(t.detailsObj.totalCount)+"次")])]),a("p",{staticClass:"text4"},[a("span",{staticClass:"span1"},[t._v("0元 | 包邮")]),a("span",{staticClass:"span2"},[t._v(t._s("￥ "+s.officialPrice))])])]),a("p",{staticClass:"goods_list_stage"},[t._v("第"+t._s(s.cycle)+"期")]),a("p",{staticClass:"goods_list_btn"})])})),0)])])]):t._e(),t.kjlFlag?a("div",{staticClass:"kjl_popup"},[t.kjlRequestFlag?a("div",{staticClass:"kjl_popup_main"},[a("img",{staticClass:"img_kjl_popup_main",attrs:{src:t.item.commodityMainImg}}),a("p",{staticClass:"kjl_popup_main_title"},[t._v(t._s(t.item.commodityName))]),a("div",{staticClass:"btn_kjl_popup_main",on:{click:t.prizeOpenPrize}}),a("i",{staticClass:"icon_closes",on:{click:function(s){t.kjlFlag=!1}}})]):a("div",{staticClass:"betFail",on:{click:t.prizeOpenPrize}},[a("i",{staticClass:"icon_closes",on:{click:function(s){t.kjlFlag=!1}}})])]):t._e(),t.betFlag?a("participate-com",{attrs:{items:t.item},on:{clousePopup:t.clousePopup}}):t._e()],1)},e=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("p",{staticClass:"price_countDown_text"},[i("i",{staticClass:"icon_time_bai"}),i("span",[t._v("距离开奖还剩")])])},function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("p",[i("span",[t._v("商品详情")])])}],o=(i("0d03"),i("c975"),function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"participate_com"},[i("div",{staticClass:"participate_com_bg",on:{click:function(s){return t.close(0)}}}),t.betFailFlag?i("div",{staticClass:"betFail",on:{click:function(s){return t.close(0)}}}):i("div",{staticClass:"participate_com_box"},[i("img",{staticClass:"img_foods",attrs:{src:t.items.commodityMainImg,alt:""}}),i("p",{staticClass:"foods_name"},[t._v(t._s(t.items.commodityName))]),i("p",{staticClass:"foods_tips"},[t._v("每参与1次消耗"+t._s(t.participateObj.consumptionIntegral)+"积分"),i("br"),t._v("投入的数量越多，中奖概率越大哦")]),i("div",{staticClass:"participate_count"},[i("p",{staticClass:"participate_count_title"},[t._v("参与次数")]),i("p",{staticClass:"participate_count_box"},[i("i",{staticClass:"icon_reduce_p",on:{click:function(s){return t.changeCount(0)}}}),i("span",[t._v(t._s(t.participateCount))]),i("i",{staticClass:"icon_add_p",on:{click:function(s){return t.changeCount(1)}}})])]),i("p",{staticClass:"participate_com_points"},[i("span",{staticClass:"text1"},[t._v("我的积分："),i("i",[t._v(t._s(t.participateObj.amount)+"积分")])]),i("span",{staticClass:"text2",on:{click:function(s){return t.toPath("/")}}},[t._v("获取更多积分 >")])]),i("p",{staticClass:"participate_btn",on:{click:t.freeGoodsBet}})]),i("i",{staticClass:"icon_closes",on:{click:function(s){return t.close(0)}}})])}),n=[],c={name:"participate-com",props:["items"],data:function(){return{participateCount:0,obj:{},participateObj:{},betFailFlag:!1}},mounted:function(){document.getElementsByTagName("body")[0].className="bodyhidden";var t=this,s=localStorage.getItem("obj");t.obj=JSON.parse(s),t.freeGoodsBetInfo()},methods:{changeCount:function(t){var s=this,i=s.participateObj.amount;if(t){if(i<s.participateObj.consumptionIntegral)return console.log(i),!1;s.participateCount++,i-=s.participateObj.consumptionIntegral}else 0==s.participateCount?s.participateCount=0:(s.participateCount--,i+=s.participateObj.consumptionIntegral);s.participateObj.amount=i},toPath:function(t){var s=this;s.$router.push({path:t})},freeGoodsBetInfo:function(){var t=this,s=t.byte256.byte256.encode(t.key,JSON.stringify(t.obj));t.$axios({method:"post",url:"/free/goods/betInfo",data:s}).then((function(s){if(200===s.data.code){var i=JSON.parse(t.byte256.byte256.decode(t.reverse_key,s.data.data));t.participateObj=i,t.participateObj.amount<t.participateObj.consumptionIntegral&&(t.participateCount=0)}}))},freeGoodsBet:function(){var t=this,s={activityInfoId:t.items.activityInfoId,goodsId:t.items.goodsId,cycle:t.items.cycle,frequency:t.participateCount};console.log(s);var i=Object.assign(t.obj,s),a=t.byte256.byte256.encode(t.key,JSON.stringify(i));t.$axios({method:"post",url:"/free/goods/bet",data:a}).then((function(s){console.log(s),200===s.data.code?(t.$toast("参与成功～"),t.close(t.participateCount)):400===s.data.code&&(t.betFailFlag=!0)}))},close:function(t){this.$emit("clousePopup",{count:t})}},beforeDestroy:function(){document.getElementsByTagName("body")[0].className="bodyshow"}},l=c,r=(i("ae10"),i("2877")),p=Object(r["a"])(l,o,n,!1,null,"7ed5a58f",null),d=p.exports,_=i("3bc7"),u=i.n(_),m={name:"foodsDetails",components:{participateCom:d},data:function(){return{kjlFlag:!1,kjlRequestFlag:!0,finishFlag:!1,time:0,isReceive:!1,isWin:!1,flagPopup:!1,openPrizeFlag:!1,betFlag:!1,supplier:{TAOBAO:"淘宝",JD:"京东"},obj:{},item:{},current:0,detailsObj:{commodityMainImg:[],commodityInfoImg:[]},foodsList:[],winUserList:[],winPrizeObj:{},participantList:["乐友075刚刚参与了2次"]}},mounted:function(){var t=this,s=Date.parse(new Date),i=localStorage.getItem("obj"),a=localStorage.getItem("itemObj");t.obj=JSON.parse(i),t.item=JSON.parse(a),t.time=t.item.endTime-s,t.freeGoodsInfo(),t.prizeOpenPrize(),t.freeGoodsParticipant()},methods:{freeGoodsParticipant:function(){var t=this;t.adLoadingFlag=!0;var s={activityInfoId:t.item.activityInfoId,goodsId:t.item.goodsId,cycle:t.item.cycle},i=Object.assign(t.obj,s);console.log(i);var a=t.byte256.byte256.encode(t.key,JSON.stringify(i));t.$axios({method:"post",url:"/free/goods/participant",data:a}).then((function(s){if(200===s.data.code){var i=JSON.parse(t.byte256.byte256.decode(t.reverse_key,s.data.data));console.log("participant======",i),t.participantList=i,u()({targets:".touzhu .main",opacity:[{value:1,duration:200},{value:0,duration:1500}],translateY:[{value:0,duration:200},{value:"-200%",duration:1500}],easing:"linear",loop:!0,duration:1700,delay:u.a.stagger(1e3)})}t.adLoadingFlag=!1}))},toDeepLink:function(t){window.location.href=t},onChange:function(t){this.current=t},goBack:function(){this.$router.go(-1)},toPath:function(t){var s=this,i={};-1==t.indexOf("participateNumber")&&-1==t.indexOf("winningPublicity")||(i.item=s.item),s.$router.push({path:t,query:i})},finish:function(){this.time<0?console.log("倒计时还未开始就结束了！！！"):(console.log("倒计时结束了！！！"),this.kjlFlag=!0),console.log(this.time),this.finishFlag=!0},toSponsor:function(t){console.log(t)},freeGoodsInfo:function(){var t=this;t.adLoadingFlag=!0;var s={activityInfoId:t.item.activityInfoId,goodsId:t.item.goodsId,cycle:t.item.cycle},i=Object.assign(t.obj,s),a=t.byte256.byte256.encode(t.key,JSON.stringify(i));t.$axios({method:"post",url:"/free/goods/info",data:a}).then((function(s){if(200===s.data.code){var i=JSON.parse(t.byte256.byte256.decode(t.reverse_key,s.data.data));t.detailsObj=i}t.adLoadingFlag=!1}))},prizeOpenPrize:function(){var t=this;t.adLoadingFlag=!0;var s={activityInfoId:t.item.activityInfoId,goodsId:t.item.goodsId,cycle:t.item.cycle},i=Object.assign(t.obj,s),a=t.byte256.byte256.encode(t.key,JSON.stringify(i));t.$axios({method:"post",url:"/prize/openPrize",data:a}).then((function(s){if(200===s.data.code){var i=JSON.parse(t.byte256.byte256.decode(t.reverse_key,s.data.data));console.log(i),i.status?(t.kjlFlag=!1,t.flagPopup=!0,t.openPrizeFlag=!0,t.prizeWinPrize(i.winPrizeId),t.winningUserList(i.winPrizeId)):t.finishFlag&&(t.kjlRequestFlag=!1)}t.adLoadingFlag=!1}))},prizeWinPrize:function(t){var s=this;s.adLoadingFlag=!0;var i={activityInfoId:s.item.activityInfoId,goodsId:s.item.goodsId,cycle:s.item.cycle,winPrizeId:t},a=Object.assign(s.obj,i),e=s.byte256.byte256.encode(s.key,JSON.stringify(a));s.$axios({method:"post",url:"/prize/winPrize",data:e}).then((function(t){if(200===t.data.code){var i=JSON.parse(s.byte256.byte256.decode(s.reverse_key,t.data.data));console.log(i),s.isWin=i.isWinPrize,s.isReceive=i.receiveStatus,i.expirationTime=s.$timestampTpDate(i.expirationTime,"ymd"),s.winPrizeObj=i}s.freeGoodsList("populargoods"),s.adLoadingFlag=!1}))},bet:function(){this.betFlag=!0},clousePopup:function(t){this.detailsObj.userCycleInvestmentCount+=t.count,this.detailsObj.totalCount+=t.count,this.betFlag=!1},closePopup:function(){this.flagPopup=!1},freeGoodsList:function(t){var s=this;s.adLoadingFlag=!0;var i={commodityType:t},a=Object.assign(s.obj,i),e=s.byte256.byte256.encode(s.key,JSON.stringify(a));s.$axios({method:"post",url:"/free/goods/list",data:e}).then((function(t){if(200===t.data.code){var i=JSON.parse(s.byte256.byte256.decode(s.reverse_key,t.data.data));for(var a in i)i[a].endTime=s.$timestampTpDate(i[a].endTime,"ymdhms");s.foodsList=i}s.adLoadingFlag=!1}))},winningUserList:function(t){var s=this;s.adLoadingFlag=!0;var i={winPrizeId:t},a=Object.assign(s.obj,i),e=s.byte256.byte256.encode(s.key,JSON.stringify(a));s.$axios({method:"post",url:"/prize/winningUserList",data:e}).then((function(t){if(200===t.data.code){var i=JSON.parse(s.byte256.byte256.decode(s.reverse_key,t.data.data));s.winUserList=i}s.adLoadingFlag=!1}))},toReceive:function(){var t=this,s=JSON.stringify(t.item);localStorage.setItem("receiveObj",s),t.$router.push({path:"/freeAccess/receive"})}}},g=m,v=(i("7f5e"),Object(r["a"])(g,a,e,!1,null,"60fb518a",null));s["default"]=v.exports},"7f5e":function(t,s,i){"use strict";i("e877")},"8cfa":function(t,s,i){},ae10:function(t,s,i){"use strict";i("8cfa")},e877:function(t,s,i){},fb8b:function(t,s,i){t.exports=i.p+"img/img_top_zs.123d4636.png"}}]);
//# sourceMappingURL=foodsDetails.f504aa1e.js.map